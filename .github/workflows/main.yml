name: CI

on: [pull_request, pull_request_review]

jobs:
  build:

    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v2
    - name: Run a one-line script
      run: echo Hello, world!
    - name: Run a multi-line script
      run: |
        echo Add other actions to build,
        echo test, and deploy your project.
        echo $GITHUB_SHA
        echo ${{ github.event.pull_request.head.sha }}
      
  test: 
     
    runs-on: ubuntu-latest
    steps: 
        - name: CI2
          uses: ypicard/get-branch-name-github-action@v1
          id: get-mybranch
        - name: print-branch 
          run: echo "${{ steps.get-mybranch.outputs.branch }}" - "${{ steps.gt-mybranch.outputs.tag }}"
          
  new-item:
    runs-on: ruby
    steps: 
        - name: other-stuff
          run: |  
           def process_pull_request(pull_request)
           @client.create_status(pull_request['base']['repo']['full_name'], pull_request['head']['sha'], 'pending')
           sleep 2 # do busy work...
           @client.create_status(pull_request['base']['repo']['full_name'], pull_request['head']['sha'], 'success')
           puts "Pull request processed!"
           end        
